"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3841],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>h});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(r),m=o,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return r?n.createElement(h,i(i({ref:t},p),{},{components:r})):n.createElement(h,i({ref:t},p))}));function h(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},1898:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var n=r(7462),o=(r(7294),r(3905));const a={sidebar_position:4},i="Ephemeral Data",s={unversionedId:"repositories/ephemeral",id:"repositories/ephemeral",title:"Ephemeral Data",description:'Automerge encourages you to persist most of your application state. Sometimes however there is state which it doesn\'t make any sense to persist. Good reasons to not persist state are if it changes extremely fast, or is only useful to the user in the context of a live "session" of some kind. One example of such data is cursor positions in collaboratively edited text. We refer to this kind of data as "ephemeral data".',source:"@site/docs/repositories/ephemeral.md",sourceDirName:"repositories",slug:"/repositories/ephemeral",permalink:"/docs/repositories/ephemeral",draft:!1,editUrl:"https://github.com/automerge/automerge.github.io/edit/main/docs/repositories/ephemeral.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"DocHandles",permalink:"/docs/repositories/dochandles"},next:{title:"Modeling Data",permalink:"/docs/cookbook/modeling-data"}},l={},c=[{value:"Sending",id:"sending",level:2},{value:"Receiving",id:"receiving",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...r}=e;return(0,o.kt)(d,(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"ephemeral-data"},"Ephemeral Data"),(0,o.kt)("p",null,'Automerge encourages you to persist most of your application state. Sometimes however there is state which it doesn\'t make any sense to persist. Good reasons to not persist state are if it changes extremely fast, or is only useful to the user in the context of a live "session" of some kind. One example of such data is cursor positions in collaboratively edited text. We refer to this kind of data as "ephemeral data".'),(0,o.kt)("p",null,"Ephemeral data is associated with a particular document, which means you need to obtain a ",(0,o.kt)("inlineCode",{parentName:"p"},"DocHandle")," for the document in question in order to send and receive ephemeral data. The rationale for this is that most of the time ephemeral data is related to a particular document. However, if you need to exchange ephemeral data which has no associated document you can always create a blank document and use that."),(0,o.kt)("h2",{id:"sending"},"Sending"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'const handle = Repo.find("<some url>")\nhandle.broadcast({\n    "some": "message"\n})\n')),(0,o.kt)("p",null,"The object passed to ",(0,o.kt)("inlineCode",{parentName:"p"},"broadcast")," will be CBOR encoded so you can send whatever you like."),(0,o.kt)("h2",{id:"receiving"},"Receiving"),(0,o.kt)("p",null,"To receive you listen to the ",(0,o.kt)("inlineCode",{parentName:"p"},'"ephemeral-message"')," event on the ",(0,o.kt)("inlineCode",{parentName:"p"},"DocHandle")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'const handle = Repo.find("<some url>")\nhandle.on("ephemeral-message", (message: any) {\n    console.log("got an ephemeral message: ", message)\n})\n')),(0,o.kt)("p",null,"The received message will be decoded from CBOR before handing it to the event handler."))}u.isMDXComponent=!0}}]);